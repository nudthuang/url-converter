<!doctype html>
<html lang="zh">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>URL 转换器</title>

  <style>
    body {
      font-family: system-ui, -apple-system, "PingFang TC", "Microsoft JhengHei", sans-serif;
      background: #f7f8fa;
      margin: 0;
      padding: 0;
    }

    /* ===== 页眉 ===== */
    .header {
      background: linear-gradient(135deg, #111, #333);
      color: #fff;
      padding: 36px 16px 28px;
      text-align: center;
    }
    .header h1 {
      margin: 0;
      font-size: 28px;
      letter-spacing: 1px;
    }
    .header p {
      margin-top: 10px;
      font-size: 14px;
      color: #ddd;
    }

    /* ===== 主体 ===== */
    .container {
      max-width: 820px;
      margin: 32px auto;
      padding: 0 16px;
    }

    textarea {
      width: 100%;
      height: 120px;
      padding: 14px;
      font-size: 16px;
      box-sizing: border-box;
      border: 1px solid #ccc;
      border-radius: 6px;
      resize: vertical;
    }

    .row { margin: 18px 0; }
    .hint {
      font-size: 14px;
      color: #555;
      margin-bottom: 6px;
    }

    .actions {
      margin-top: 22px;
    }

    button {
      padding: 12px 18px;
      font-size: 16px;
      border-radius: 6px;
      border: none;
      cursor: pointer;
    }

    #copy {
      background: #007aff;
      color: #fff;
    }

    #open {
      background: #34c759;
      color: #fff;
      margin-left: 12px;
    }

    .ok {
      margin-left: 12px;
      font-size: 14px;
      color: #28a745;
    }

    .err {
      margin-top: 8px;
      font-size: 14px;
      color: #c00;
    }

    /* ===== 隐藏输出框 ===== */
    #out {
      display: none;
    }
  </style>
</head>

<body>

  <!-- 页眉 -->
  <div class="header">
    <h1>URL 转换器</h1>
    <p>粘贴原始链接，一键复制或直接打开新链接</p>
  </div>

  <!-- 主体 -->
  <div class="container">

    <div class="row">
      <div class="hint">输入网址</div>
      <textarea id="in" placeholder="粘贴原始网址，例如：https://www.youtube.com/watch?v=xxxx"></textarea>
      <div id="err" class="err"></div>
    </div>

    <!-- 输出框：功能保留，UI 隐藏 -->
    <textarea id="out" readonly></textarea>

    <div class="actions">
      <button id="copy">复制新网址</button>
      <button id="open">打开新网址</button>
      <span id="copied" class="ok"></span>
    </div>

  </div>

<script>
  // ===== 转换规则（桌面 + 移动端）=====
  const RULES = [
    { from: "www.youtube.com", to: "www.yout-ube.com" },
    { from: "m.youtube.com",   to: "m.yout-ube.com" },
  ];

  function normalizeInputUrl(raw) {
    const s = (raw || "").trim();
    if (!s) return "";
    return s.includes("://") ? s : "https://" + s;
  }

  function convertUrl(raw) {
    const candidate = normalizeInputUrl(raw);
    if (!candidate) return "";

    let u;
    try {
      u = new URL(candidate);
    } catch {
      throw new Error("这不是合法的网址（URL）");
    }

    for (const r of RULES) {
      if (u.host === r.from) {
        u.host = r.to;
        break;
      }
    }
    return u.toString();
  }

  const input  = document.getElementById("in");
  const output = document.getElementById("out");
  const err    = document.getElementById("err");
  const copied = document.getElementById("copied");

  function run() {
    copied.textContent = "";
    err.textContent = "";
    try {
      output.value = convertUrl(input.value);
    } catch (e) {
      output.value = "";
      err.textContent = e.message || String(e);
    }
  }

  input.addEventListener("input", run);

  // 复制
  document.getElementById("copy").addEventListener("click", async () => {
    if (!output.value) return;
    await navigator.clipboard.writeText(output.value);
    copied.textContent = "已复制";
    setTimeout(() => copied.textContent = "", 1200);
  });

  // 打开
  document.getElementById("open").addEventListener("click", () => {
    if (!output.value) return;
    const u = new URL(output.value);
    u.hash = "top";
    window.open(u.toString(), "_blank", "noopener,noreferrer");
  });

  run();
</script>

</body>
</html>
